# Story 007.05: Update Documentation and Examples for New Architecture

## Status
Proposed

## Epic
007 - Tree-Shaking Architecture Refactor

## Priority
High

## Story Points
13

## Story
**As a** user of useTemporal (alpha tester or future user),
**I want** clear documentation explaining the architecture changes and API levels,
**So that** I can migrate my code and choose the right API level for my needs.

## Story Context

**Existing System Integration:**
- Depends on: Stories 007.01-007.04 (all architectural changes complete)
- Updates: VitePress documentation, CHANGELOG, migration guides, examples
- Technology: Markdown documentation, VitePress, Vue examples
- Follows pattern: BMad documentation principles, clear user communication
- Touch points: /vitepress docs, /examples, CHANGELOG.md, README.md

**Problem Being Solved:**
The architectural refactor introduces breaking changes and a new three-level API design. Users need:
1. Migration guide from alpha.1 to 2.0
2. Understanding of three API levels (when to use each)
3. Updated code examples
4. Bundle size guidance
5. Tree-shaking best practices

**Documentation Scope:**
- Migration guide (alpha.1 ‚Üí 2.0)
- Three-level API documentation
- Updated all code examples
- Bundle size comparisons
- Updated Vue example app
- CHANGELOG with breaking changes
- README updates

## Acceptance Criteria

**Migration Guide:**
1. Create comprehensive migration guide (MIGRATION.md)
2. Document all breaking changes with before/after code
3. Provide step-by-step migration instructions
4. Include bundle size impact of migration choices

**API Documentation:**
5. Document Level 1 (Pure Functions) API with examples
6. Document Level 2 (Builder) API with examples
7. Document Level 3 (Composables) API with examples
8. Create decision matrix: when to use each level
9. Document tree-shaking implications of each level

**Code Examples:**
10. Update all code examples in VitePress docs
11. Update Vue example application
12. Create standalone examples for each API level
13. Add bundle size examples

**Project Documentation:**
14. Update CHANGELOG.md with v2.0 breaking changes
15. Update README.md with new API overview
16. Update package description if needed
17. Verify CLAUDE.md reflects new architecture

**Quality:**
18. All documentation markdown passes linting
19. All code examples are tested and work correctly
20. Documentation is clear, concise, and beginner-friendly

## Tasks / Subtasks

### Phase 1: Migration Guide Creation

#### 1.1 Create MIGRATION.md (AC#1, #2, #3, #4)
- [ ] **Create root-level MIGRATION.md file**
```markdown
# Migration Guide: v2.0.0-alpha.1 ‚Üí v2.0.0

## Overview

Version 2.0 introduces significant architectural improvements for better tree-shaking
and bundle size optimization. The core change: operations are now pure functions
accepting adapters explicitly, replacing the global unit registry pattern.

**Bundle Size Impact:**
- Before: 30KB minimum bundle
- After (Level 1): 5-7KB for basic usage (76% reduction)
- After (Level 2): 8-12KB with builder convenience (60% reduction)
- After (Level 3): 15-20KB with full reactivity (33% reduction)

## Breaking Changes Summary

1. **Unit registry removed** - No more `defineUnit()`
2. **Operation signatures changed** - Pure functions require adapter parameter
3. **Calendar extraction** - Must import calendar explicitly
4. **Custom units** - Different registration pattern

## Migration Steps

### 1. Update Imports

**Before:**
```typescript
import { createTemporal } from '@allystudio/usetemporal';
```

**After - Choose your API level:**

**Level 1 (Pure Functions):**
```typescript
import { period, divide } from '@allystudio/usetemporal/operations';
import { createNativeAdapter } from '@allystudio/usetemporal/native';
```

**Level 2 (Builder):**
```typescript
import { createTemporal } from '@allystudio/usetemporal';
import { createNativeAdapter } from '@allystudio/usetemporal/native';
```

**Level 3 (Composables):**
```typescript
import { createTemporal, usePeriod } from '@allystudio/usetemporal';
import { createNativeAdapter } from '@allystudio/usetemporal/native';
```

### 2. Update Operation Calls

**Before (alpha.1):**
```typescript
import { period, divide } from '@allystudio/usetemporal';
const temporal = createTemporal({ adapter, date: new Date() });
const year = period(temporal, new Date(), 'year');
const months = divide(temporal, year, 'month');
```

**After (Level 1 - Pure Functions):**
```typescript
import { period, divide } from '@allystudio/usetemporal/operations';
const adapter = createNativeAdapter({ weekStartsOn: 1 });
const year = period(adapter, new Date(), 'year');
const months = divide(adapter, year, 'month');
```

**After (Level 2 - Builder):**
```typescript
const temporal = createTemporal({
  adapter: createNativeAdapter(),
  weekStartsOn: 1
});
const year = temporal.period(new Date(), 'year');
const months = temporal.divide(year, 'month');
```

**After (Level 3 - Composables):**
```typescript
const temporal = createTemporal({
  adapter: createNativeAdapter(),
  date: new Date()
});
const month = usePeriod(temporal, 'month');
// month.value is reactive Period
```

### 3. Update Calendar Usage

**Before (auto-imported):**
```typescript
import { createStableMonth } from '@allystudio/usetemporal';
const stable = createStableMonth(temporal, new Date());
```

**After (explicit import):**
```typescript
import { createStableMonth } from '@allystudio/usetemporal/calendar';
const adapter = createNativeAdapter();
const stable = createStableMonth(adapter, new Date(), 1 /* weekStartsOn */);
```

### 4. Update Custom Units

**Before (unit registry):**
```typescript
import { defineUnit } from '@allystudio/usetemporal';

defineUnit('fortnight', {
  period(date, adapter) {
    // ...
  }
});
```

**After (custom adapter or helper):**

**Option A: Custom Adapter**
```typescript
const myAdapter = {
  ...nativeAdapter,
  startOf(date, unit) {
    if (unit === 'fortnight') return fortnightStart(date);
    return nativeAdapter.startOf(date, unit);
  },
  endOf(date, unit) {
    if (unit === 'fortnight') return fortnightEnd(date);
    return nativeAdapter.endOf(date, unit);
  }
};
```

**Option B: Helper Function**
```typescript
function fortnightPeriod(adapter, date) {
  const start = /* calculate */;
  const end = /* calculate */;
  return { start, end, type: 'fortnight', date };
}
```

## Which API Level Should I Use?

| Scenario | Recommended Level | Why |
|----------|------------------|-----|
| Performance-critical app, minimal features | Level 1 (Pure) | Smallest bundle, fastest load |
| Need calendar, divide, basic operations | Level 1 or 2 | Good balance |
| Building complex UI with many operations | Level 2 (Builder) | Convenience without bloat |
| Vue/React app, need reactivity | Level 3 (Composables) | Reactive state management |
| Mixing approaches? | Yes, combine them! | Use Level 1 for hot paths, Level 2/3 elsewhere |

## Bundle Size Comparison

```bash
# Level 1 (period + divide + native)
import { period, divide } from '@allystudio/usetemporal/operations';
import { createNativeAdapter } from '@allystudio/usetemporal/native';
# Bundle: ~5-7KB gzipped

# Level 2 (builder with 3 methods)
import { createTemporal } from '@allystudio/usetemporal';
# Bundle: ~8-12KB gzipped

# Level 3 (full DX with composables)
import { createTemporal, usePeriod } from '@allystudio/usetemporal';
# Bundle: ~15-20KB gzipped

# Before (alpha.1)
import { createTemporal, period } from '@allystudio/usetemporal';
# Bundle: ~30KB gzipped ‚ùå
```

## Common Migration Issues

### Issue 1: "Cannot find module '@allystudio/usetemporal/operations'"

**Cause:** Old TypeScript config or outdated package

**Fix:**
```json
// tsconfig.json
{
  "compilerOptions": {
    "moduleResolution": "bundler" // or "node16"
  }
}
```

### Issue 2: Tests failing after migration

**Cause:** Operation signatures changed

**Fix:** Update test calls to pass adapter:
```typescript
// Before
const month = period(temporal, new Date(), 'month');

// After
const month = period(temporal.adapter, new Date(), 'month');
```

### Issue 3: Calendar not found

**Cause:** Calendar is now a separate import

**Fix:**
```typescript
import { createStableMonth } from '@allystudio/usetemporal/calendar';
```

## Questions?

Open an issue: https://github.com/AleksejDix/usetemporal/issues
```

### Phase 2: API Level Documentation

#### 2.1 Document Level 1 API (AC#5)
- [ ] **Create /vitepress/api/level-1-pure-functions.md**
```markdown
# Level 1: Pure Functions API

The purist approach - minimal bundle size, maximum tree-shaking.

## When to Use

- Performance-critical applications
- You only need a few operations
- You want the smallest possible bundle size
- You prefer explicit dependencies

## Bundle Size

**5-7KB gzipped** for basic usage (period + divide + native adapter)

## Import Pattern

```typescript
import { period, divide, merge } from '@allystudio/usetemporal/operations';
import { createNativeAdapter } from '@allystudio/usetemporal/native';
```

## Example: Calendar Grid

```typescript
import { period, divide } from '@allystudio/usetemporal/operations';
import { createNativeAdapter } from '@allystudio/usetemporal/native';

const adapter = createNativeAdapter({ weekStartsOn: 1 });

// Create current month
const month = period(adapter, new Date(), 'month');

// Divide into weeks
const weeks = divide(adapter, month, 'week');

// Render calendar
weeks.forEach(week => {
  const days = divide(adapter, week, 'day');
  console.log(days.map(d => d.date.getDate()));
});
```

## Available Operations

- `period(adapter, date, unit)` - Create a period
- `period(adapter, { start, end })` - Create custom period
- `divide(adapter, period, unit)` - Divide period into smaller units
- `merge(adapter, periods, targetUnit?)` - Merge multiple periods
- `next(adapter, period, count?)` - Get next period
- `previous(adapter, period, count?)` - Get previous period
- `go(adapter, period, direction, count)` - Navigate periods
- `split(period, date)` - Split period at date (pure, no adapter needed)
- `contains(period, date | period)` - Check containment (pure)
- `isSame(adapter, period1, period2, unit)` - Compare periods

## Adapter Creation

```typescript
// Native adapter (no dependencies)
import { createNativeAdapter } from '@allystudio/usetemporal/native';
const adapter = createNativeAdapter({ weekStartsOn: 0 }); // Sunday

// date-fns adapter
import { createDateFnsAdapter } from '@allystudio/usetemporal/date-fns';
const adapter = createDateFnsAdapter({ weekStartsOn: 1 }); // Monday

// Luxon adapter
import { createLuxonAdapter } from '@allystudio/usetemporal/luxon';
const adapter = createLuxonAdapter({ weekStartsOn: 1 });

// Temporal adapter (future)
import { createTemporalAdapter } from '@allystudio/usetemporal/temporal';
const adapter = createTemporalAdapter({ weekStartsOn: 1 });
```

## TypeScript Support

Full TypeScript support with strict typing:

```typescript
import type { Adapter, Period, Unit } from '@allystudio/usetemporal/types';

const adapter: Adapter = createNativeAdapter();
const month: Period = period(adapter, new Date(), 'month');
```

## Tree-Shaking

Unused operations are completely eliminated from your bundle:

```typescript
// Only imports period and divide - merge, next, previous etc. excluded
import { period, divide } from '@allystudio/usetemporal/operations';
```
```

#### 2.2 Document Level 2 API (AC#6)
- [ ] **Create /vitepress/api/level-2-builder.md**
```markdown
# Level 2: Builder API

Balanced approach - convenience methods with good tree-shaking.

## When to Use

- You want convenient syntax
- You use multiple operations frequently
- Bundle size matters but not critical
- You prefer method-chaining style

## Bundle Size

**8-12KB gzipped** for common usage scenarios

## Import Pattern

```typescript
import { createTemporal } from '@allystudio/usetemporal';
import { createNativeAdapter } from '@allystudio/usetemporal/native';
```

## Example: Calendar Grid

```typescript
import { createTemporal } from '@allystudio/usetemporal';
import { createNativeAdapter } from '@allystudio/usetemporal/native';

const temporal = createTemporal({
  adapter: createNativeAdapter(),
  weekStartsOn: 1
});

// Create current month
const month = temporal.period(new Date(), 'month');

// Divide into weeks
const weeks = temporal.divide(month, 'week');

// Render calendar
weeks.forEach(week => {
  const days = temporal.divide(week, 'day');
  console.log(days.map(d => d.date.getDate()));
});
```

## Builder Methods

All operations available as methods on the temporal object:

```typescript
const temporal = createTemporal({ adapter, weekStartsOn: 1 });

temporal.period(date, unit)         // Create period
temporal.divide(period, unit)       // Divide period
temporal.merge(periods, targetUnit) // Merge periods
temporal.next(period, count)        // Get next
temporal.previous(period, count)    // Get previous
temporal.go(period, direction, count) // Navigate
temporal.split(period, date)        // Split period
temporal.contains(period, date)     // Check containment
temporal.isSame(period1, period2, unit) // Compare
```

## Mixing with Level 1

You can mix builder and pure functions:

```typescript
import { createTemporal } from '@allystudio/usetemporal';
import { divide } from '@allystudio/usetemporal/operations';

const temporal = createTemporal({ adapter, weekStartsOn: 1 });

// Use builder for some operations
const month = temporal.period(new Date(), 'month');

// Use pure function for others (maybe in hot path)
const weeks = divide(temporal.adapter, month, 'week');
```

## Configuration

```typescript
interface CreateTemporalOptions {
  adapter: Adapter;          // Required: date adapter
  date?: Date | Ref<Date>;   // Optional: initial browsing date
  now?: Date | Ref<Date>;    // Optional: current time override
  weekStartsOn?: number;     // Optional: 0-6 (Sunday-Saturday)
}
```

## Reactive State

The temporal object includes reactive state for browsing:

```typescript
const temporal = createTemporal({ adapter, date: new Date() });

console.log(temporal.browsing.value);  // Current browsing period
console.log(temporal.now.value);       // Current time period

// Update browsing date (triggers reactivity)
temporal.browsing.value = {
  ...temporal.browsing.value,
  date: new Date(2024, 0, 1)
};
```
```

#### 2.3 Document Level 3 API (AC#7)
- [ ] **Create /vitepress/api/level-3-composables.md**
```markdown
# Level 3: Composables API

Full DX - reactive composables for Vue-style applications.

## When to Use

- Building Vue or React applications
- Need reactive state management
- Want automatic updates on date changes
- Bundle size less critical

## Bundle Size

**15-20KB gzipped** with full reactivity features

## Import Pattern

```typescript
import { createTemporal, usePeriod } from '@allystudio/usetemporal';
import { createNativeAdapter } from '@allystudio/usetemporal/native';
```

## Example: Reactive Calendar

```vue
<script setup>
import { ref } from 'vue';
import { createTemporal, usePeriod } from '@allystudio/usetemporal';
import { divide } from '@allystudio/usetemporal/operations';
import { createNativeAdapter } from '@allystudio/usetemporal/native';

const temporal = createTemporal({
  adapter: createNativeAdapter(),
  date: ref(new Date()),
  weekStartsOn: 1
});

// Reactive month period
const month = usePeriod(temporal, 'month');

// Weeks automatically update when month changes
const weeks = computed(() => divide(temporal.adapter, month.value, 'week'));

function nextMonth() {
  month.value = temporal.next(month.value);
}

function previousMonth() {
  month.value = temporal.previous(month.value);
}
</script>

<template>
  <div class="calendar">
    <header>
      <button @click="previousMonth">‚Üê</button>
      <h2>{{ month.value.date.toLocaleDateString('en', { month: 'long', year: 'numeric' }) }}</h2>
      <button @click="nextMonth">‚Üí</button>
    </header>

    <div v-for="week in weeks" :key="week.start.getTime()">
      <div v-for="day in divide(temporal.adapter, week, 'day')" :key="day.date.getTime()">
        {{ day.date.getDate() }}
      </div>
    </div>
  </div>
</template>
```

## Available Composables

- `usePeriod(temporal, unit)` - Reactive period of any unit type

## Reactivity Integration

Works with Vue's reactivity system:

```typescript
import { ref, computed } from 'vue';
import { createTemporal, usePeriod } from '@allystudio/usetemporal';

const currentDate = ref(new Date());
const temporal = createTemporal({ adapter, date: currentDate });

// Automatically updates when currentDate changes
const month = usePeriod(temporal, 'month');

// Change date - month automatically recalculates
currentDate.value = new Date(2024, 5, 15);
console.log(month.value); // June 2024
```

## Combining with Builder API

Use composables for reactive state, builder for imperatives:

```typescript
const temporal = createTemporal({ adapter, date: new Date() });

// Reactive current month
const month = usePeriod(temporal, 'month');

// Imperative operations
function navigateToNext() {
  const next = temporal.next(month.value);
  temporal.browsing.value = { ...temporal.browsing.value, date: next.date };
}
```
```

#### 2.4 Create decision matrix (AC#8)
- [ ] **Create /vitepress/guide/choosing-api-level.md**
```markdown
# Choosing the Right API Level

useTemporal offers three API levels to match your needs.

## Quick Decision Tree

```
Do you need reactivity (Vue/React)?
‚îú‚îÄ YES ‚Üí Level 3 (Composables)
‚îî‚îÄ NO
    ‚îú‚îÄ Performance critical?
    ‚îÇ   ‚îî‚îÄ YES ‚Üí Level 1 (Pure Functions)
    ‚îî‚îÄ NO ‚Üí Level 2 (Builder)
```

## Detailed Comparison

| Factor | Level 1 | Level 2 | Level 3 |
|--------|---------|---------|---------|
| **Bundle Size** | 5-7KB | 8-12KB | 15-20KB |
| **Tree-Shaking** | Excellent | Good | Good |
| **DX** | Verbose | Convenient | Excellent |
| **Reactivity** | No | No | Yes (Vue) |
| **Boilerplate** | High | Low | Very Low |
| **Learning Curve** | Easy | Easy | Medium |

## Use Case Examples

### E-commerce Product Filters
**Recommended:** Level 1 (Pure Functions)
- Need date range filtering
- Performance matters (hot path)
- Only using period + contains
- Bundle size critical

```typescript
import { period, contains } from '@allystudio/usetemporal/operations';
```

### Dashboard Analytics
**Recommended:** Level 2 (Builder)
- Multiple time period operations
- Comparing periods, navigation
- Balance performance and convenience

```typescript
import { createTemporal } from '@allystudio/usetemporal';
const temporal = createTemporal({ adapter });
```

### Interactive Calendar UI
**Recommended:** Level 3 (Composables)
- Vue/React component
- Need reactive updates
- User navigates between months
- DX more important than bundle size

```typescript
import { createTemporal, usePeriod } from '@allystudio/usetemporal';
```

## Can I Mix Levels?

**Yes!** Use different levels in different parts of your app:

```typescript
// Hot path: Level 1 for performance
import { contains } from '@allystudio/usetemporal/operations';

function filterByDateRange(items, start, end) {
  const range = { start, end, type: 'custom', date: start };
  return items.filter(item => contains(range, item.date));
}

// UI: Level 3 for convenience
import { createTemporal, usePeriod } from '@allystudio/usetemporal';

const temporal = createTemporal({ adapter, date: new Date() });
const month = usePeriod(temporal, 'month');
```
```

### Phase 3: Update Code Examples

#### 3.1 Update VitePress documentation examples (AC#10)
- [ ] **Review all .md files in /vitepress**
```bash
cd vitepress
git grep -l "import.*usetemporal" **/*.md
# Update each file with correct imports
```

- [ ] **Update /vitepress/guide/quick-start.md**
  - Show Level 2 (Builder) as default quickstart
  - Link to Level 1 and Level 3 docs

- [ ] **Update /vitepress/api/*.md**
  - Update all operation examples
  - Add adapter parameter to pure functions
  - Show builder equivalents

#### 3.2 Update Vue example (AC#11)
- [ ] **Update /examples/vue/src/App.vue**
  - Use Level 2 or Level 3 API
  - Add comments explaining approach

- [ ] **Update calendar components**
  - MonthView.vue
  - YearView.vue
  - Update all useTemporal usage

#### 3.3 Create standalone examples (AC#12)
- [ ] **Create /examples/level-1-pure/**
  - Simple Node.js script
  - Minimal bundle example
  - Demonstrates tree-shaking

- [ ] **Create /examples/level-2-builder/**
  - Node.js script with builder
  - Shows convenience vs. bundle size

- [ ] **Create /examples/level-3-composables/**
  - Small Vue app
  - Demonstrates reactivity

#### 3.4 Bundle size examples (AC#13)
- [ ] **Create /examples/bundle-size-comparison/**
```typescript
// level-1.ts
import { period } from '@allystudio/usetemporal/operations';
// ... minimal usage

// level-2.ts
import { createTemporal } from '@allystudio/usetemporal';
// ... builder usage

// level-3.ts
import { createTemporal, usePeriod } from '@allystudio/usetemporal';
// ... composables usage

// Build all three and compare sizes
```

### Phase 4: Update Project Documentation

#### 4.1 Update CHANGELOG.md (AC#14)
- [ ] **Add v2.0.0 section**
```markdown
# Changelog

## [2.0.0] - 2025-XX-XX

### üöÄ Major Changes

**Architecture Refactor for Tree-Shaking**

This release completely refactors the internal architecture to enable optimal
tree-shaking, reducing bundle sizes by 60-76% depending on usage patterns.

### Breaking Changes

#### 1. Global Unit Registry Removed

**Before:**
```typescript
import { defineUnit } from '@allystudio/usetemporal';
defineUnit('custom', { /* ... */ });
```

**After:**
See [Custom Units Guide](./docs/custom-units.md)

#### 2. Operation Signatures Changed

**Before:**
```typescript
const month = period(temporal, new Date(), 'month');
```

**After (Pure Functions):**
```typescript
const month = period(adapter, new Date(), 'month');
```

**After (Builder):**
```typescript
const month = temporal.period(new Date(), 'month');
```

#### 3. Calendar Utilities Separated

**Before:**
```typescript
import { createStableMonth } from '@allystudio/usetemporal';
```

**After:**
```typescript
import { createStableMonth } from '@allystudio/usetemporal/calendar';
```

### Added

- ‚ú® Level 1 API: Pure functions (`@allystudio/usetemporal/operations`)
- ‚ú® Level 2 API: Builder pattern with tree-shakable methods
- ‚ú® Level 3 API: Composables for reactive applications
- ‚ú® Subpath exports for better tree-shaking
- ‚ú® Comprehensive migration guide

### Improved

- üì¶ Bundle size: 5-7KB for minimal usage (was 30KB)
- üå≥ Tree-shaking: Only bundle what you use
- üìö Documentation: Three API levels fully documented
- üéØ TypeScript: Improved type inference

### Migration

See [MIGRATION.md](./MIGRATION.md) for detailed migration instructions.

### Bundle Size Comparison

| Usage | v1.x | v2.0 | Savings |
|-------|------|------|---------|
| Minimal (period + divide) | 30KB | 5-7KB | 76% |
| Builder (5 operations) | 30KB | 8-12KB | 60% |
| Full DX (composables) | 30KB | 15-20KB | 33% |

---

## [2.0.0-alpha.1] - 2025-XX-XX

Initial alpha release with functional API.
```

#### 4.2 Update README.md (AC#15)
- [ ] **Update README.md**
  - Add "Three API Levels" section
  - Update installation instructions
  - Update quick example (show Level 2)
  - Add link to migration guide
  - Update bundle size badges

```markdown
# useTemporal

Revolutionary time library with unique `divide()` pattern for hierarchical time management.

## üì¶ Bundle Size

- **Level 1 (Pure):** 5-7KB gzipped
- **Level 2 (Builder):** 8-12KB gzipped
- **Level 3 (Composables):** 15-20KB gzipped

## üöÄ Quick Start

```bash
npm install @allystudio/usetemporal
```

**Level 2 (Builder) - Recommended for most users:**

```typescript
import { createTemporal } from '@allystudio/usetemporal';
import { createNativeAdapter } from '@allystudio/usetemporal/native';

const temporal = createTemporal({
  adapter: createNativeAdapter(),
  weekStartsOn: 1
});

const year = temporal.period(new Date(), 'year');
const months = temporal.divide(year, 'month');
```

## üéØ Three API Levels

Choose the level that fits your needs:

1. **Level 1 (Pure Functions)** - Smallest bundle, maximum tree-shaking
2. **Level 2 (Builder)** - Balanced convenience and size
3. **Level 3 (Composables)** - Full reactivity for Vue/React

[Learn more about choosing an API level](./docs/guide/choosing-api-level.md)

## üìö Documentation

- [Quick Start](./docs/guide/quick-start.md)
- [API Reference](./docs/api/)
- [Migration Guide](./MIGRATION.md)

## üîÑ Migrating from v1.x or alpha.1?

See [MIGRATION.md](./MIGRATION.md) for detailed instructions.
```

#### 4.3 Update CLAUDE.md (AC#17)
- [ ] **Update /packages/usetemporal/CLAUDE.md**
  - Document three API levels
  - Update architecture section
  - Remove unit registry references
  - Add tree-shaking notes

### Phase 5: Testing and Validation

#### 5.1 Test all documentation examples (AC#19)
- [ ] **Extract all code blocks from documentation**
```bash
# Use markdown-code-runner or similar
npx markdown-code-runner vitepress/**/*.md
```

- [ ] **Test each example compiles and runs**
- [ ] **Fix any broken examples**

#### 5.2 Test Vue example works (AC#11, #19)
- [ ] **Run Vue example**
```bash
cd examples/vue
npm install
npm run dev
```
- [ ] **Test all calendar functionality**
- [ ] **Verify no console errors**

#### 5.3 Markdown linting (AC#18)
- [ ] **Run markdown linter**
```bash
npx markdownlint vitepress/**/*.md
npx markdownlint *.md
```
- [ ] **Fix any linting errors**

#### 5.4 Documentation clarity review (AC#20)
- [ ] **Self-review all documentation**
  - Is it beginner-friendly?
  - Are examples clear?
  - Are breaking changes well explained?
- [ ] **Get peer review** (if available)

### Phase 6: Bundle Size Documentation

#### 6.1 Create bundle size guide (AC#13)
- [ ] **Create /vitepress/guide/bundle-size-optimization.md**
```markdown
# Bundle Size Optimization

Learn how to minimize your bundle size with useTemporal.

## Understanding Tree-Shaking

useTemporal v2.0 is designed for optimal tree-shaking:
- Only bundle operations you use
- No side effects
- Modular architecture

## Measuring Your Bundle

```bash
# Using Rollup
npx rollup your-app.js --format esm -o dist/bundle.js
gzip -c dist/bundle.js | wc -c

# Using Webpack Bundle Analyzer
npm install -D webpack-bundle-analyzer
npx webpack-bundle-analyzer dist/stats.json
```

## Optimization Tips

### 1. Use Level 1 for Hot Paths

```typescript
// Hot path: Use pure functions
import { contains } from '@allystudio/usetemporal/operations';

function filterItems(items, range) {
  return items.filter(item => contains(range, item.date));
}
```

### 2. Import Only What You Need

```typescript
// ‚úÖ Good: Specific imports
import { period, divide } from '@allystudio/usetemporal/operations';

// ‚ùå Bad: Barrel import (though still tree-shakes)
import * as ops from '@allystudio/usetemporal/operations';
```

### 3. Choose the Right Adapter

- **Native adapter:** 0KB (no dependencies)
- **date-fns adapter:** +60KB (date-fns)
- **Luxon adapter:** +15KB (luxon)
- **Temporal adapter:** +40KB (polyfill)

### 4. Lazy Load Calendar Features

```typescript
// Don't import calendar unless needed
const calendar = await import('@allystudio/usetemporal/calendar');
const stable = calendar.createStableMonth(adapter, date, 1);
```

## Real-World Examples

### Example 1: Date Range Picker

**Before v2.0:** 30KB
**After v2.0 (Level 1):** 5KB
**Savings:** 83%

```typescript
import { period, contains } from '@allystudio/usetemporal/operations';
// Minimal bundle for date range filtering
```

### Example 2: Calendar Component

**Before v2.0:** 30KB
**After v2.0 (Level 2):** 10KB
**Savings:** 67%

```typescript
import { createTemporal } from '@allystudio/usetemporal';
import { createStableMonth } from '@allystudio/usetemporal/calendar';
// Tree-shakes unused operations
```

### Example 3: Full Dashboard

**Before v2.0:** 30KB
**After v2.0 (Level 3):** 18KB
**Savings:** 40%

```typescript
import { createTemporal, usePeriod } from '@allystudio/usetemporal';
// Includes reactivity, but still tree-shakes
```
```

### Phase 7: Final Review

- [ ] **Spell check all documentation**
- [ ] **Check all links work**
- [ ] **Verify code highlighting works**
- [ ] **Test documentation site builds**
```bash
cd vitepress
npm run docs:build
npm run docs:preview
```
- [ ] **Get user feedback** (if alpha testers available)

## Technical Notes

### Documentation Structure

```
vitepress/
‚îú‚îÄ‚îÄ guide/
‚îÇ   ‚îú‚îÄ‚îÄ quick-start.md              # Updated
‚îÇ   ‚îú‚îÄ‚îÄ choosing-api-level.md       # NEW
‚îÇ   ‚îî‚îÄ‚îÄ bundle-size-optimization.md # NEW
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ level-1-pure-functions.md   # NEW
‚îÇ   ‚îú‚îÄ‚îÄ level-2-builder.md          # NEW
‚îÇ   ‚îú‚îÄ‚îÄ level-3-composables.md      # NEW
‚îÇ   ‚îî‚îÄ‚îÄ operations/                 # Updated all
‚îÇ       ‚îú‚îÄ‚îÄ period.md
‚îÇ       ‚îú‚îÄ‚îÄ divide.md
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ migration/
    ‚îî‚îÄ‚îÄ v2.md                        # NEW

MIGRATION.md                         # NEW (root level)
CHANGELOG.md                         # Updated
README.md                            # Updated
```

### Documentation Principles

1. **Show, don't tell:** Code examples for every concept
2. **Progressive disclosure:** Start simple, add complexity
3. **Clear migration path:** Before/after comparisons
4. **Decision support:** Help users choose the right API
5. **Real-world examples:** Practical use cases

### Writing Style

- Use "you" (second person)
- Active voice
- Short sentences
- Clear headings
- Code examples before explanations

### Code Example Standards

- Include imports
- Complete, runnable examples
- Add comments for clarity
- Show TypeScript types
- Test all examples

## Definition of Done

- [ ] MIGRATION.md created with comprehensive migration guide
- [ ] All breaking changes documented with before/after code
- [ ] Three API levels fully documented (Level 1, 2, 3)
- [ ] Decision matrix created for choosing API level
- [ ] All VitePress documentation examples updated
- [ ] Vue example application updated
- [ ] Standalone examples created for each level
- [ ] Bundle size comparison examples created
- [ ] CHANGELOG.md updated with v2.0 changes
- [ ] README.md updated with new API overview
- [ ] CLAUDE.md reflects new architecture
- [ ] All documentation markdown passes linting
- [ ] All code examples tested and working
- [ ] Documentation is clear and beginner-friendly

## Risk and Compatibility Check

**Low Risk Assessment:**
- **Primary Risk:** Documentation gaps or unclear instructions
- **Impact**: MEDIUM - affects user adoption and satisfaction
- **Mitigation**: Comprehensive examples, peer review, user testing
- **Rollback**: N/A (documentation only)

**Compatibility Verification:**
- [ ] No code changes
- [ ] No database changes
- [ ] No UI component changes
- [ ] Performance impact: N/A (documentation only)

## Dev Notes

### Implementation Order

1. **Migration guide first**: Most important for users
2. **API documentation**: Level 1, 2, 3 in order
3. **Update examples**: VitePress, then Vue example
4. **Project docs**: CHANGELOG, README, CLAUDE.md
5. **Test everything**: Examples, links, build
6. **Review and polish**: Clarity, spelling, style

### Tools

```bash
# Markdown linting
npm install -D markdownlint-cli
npx markdownlint **/*.md

# Test code examples
npm install -D markdown-code-runner
npx markdown-code-runner docs/**/*.md

# Check links
npm install -D markdown-link-check
npx markdown-link-check README.md
```

### Documentation Testing

```bash
# Build VitePress docs
cd vitepress
npm run docs:build

# Preview locally
npm run docs:preview

# Check for broken links
npm run docs:check-links
```

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-10 | 1.0 | Initial story creation | Claude (BMad Master) |

## Dev Agent Record

_To be filled by development agent upon implementation_

## QA Results

_To be filled by QA reviewer_
