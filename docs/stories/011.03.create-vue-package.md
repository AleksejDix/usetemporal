# Story 011.03: Create @allystudio/usetemporal-vue Package

## Status

Draft

## Story

**As a** Vue.js developer using useTemporal,
**I want** an official Vue integration package with reactive composables,
**so that** I can use useTemporal with full Vue reactivity support.

## Acceptance Criteria

1. Rename `usetemporal-vue-extracted` to `usetemporal-vue`
2. Update package.json with proper package name `@allystudio/usetemporal-vue`
3. Set proper version (2.0.0-alpha.2 or 2.0.0-beta.1)
4. Configure package.json exports for optimal tree-shaking
5. Export `useTemporal` as main Vue composable
6. Export `usePeriod` composable
7. Re-export core operations for convenience
8. Add proper TypeScript type definitions
9. Configure build pipeline (Vite)
10. All package tests pass
11. Package builds successfully
12. README.md with usage examples
13. Add package to monorepo workspace

## Tasks / Subtasks

- [ ] Rename and configure package (AC: 1, 2, 3, 13)
  - [ ] Rename directory: `usetemporal-vue-extracted` → `usetemporal-vue`
  - [ ] Update package.json name to `@allystudio/usetemporal-vue`
  - [ ] Set version to `2.0.0-beta.1`
  - [ ] Update workspace references in root package.json
  - [ ] Add to npm workspaces array

- [ ] Configure package.json metadata (AC: 2)
  - [ ] Set description: "Vue.js integration for useTemporal with reactive composables"
  - [ ] Set license: MIT
  - [ ] Set author
  - [ ] Add repository URL
  - [ ] Add keywords: vue, composable, reactive, temporal, time

- [ ] Configure package exports (AC: 4, 5, 6, 7)
  - [ ] Add main entry point exporting useTemporal and usePeriod
  - [ ] Re-export core operations from @allystudio/usetemporal
  - [ ] Configure package.json exports map
  - [ ] Set `"sideEffects": false` for tree-shaking

- [ ] Configure TypeScript (AC: 8)
  - [ ] Ensure tsconfig.json properly configured
  - [ ] Export VueTemporal interface type
  - [ ] Export all composable types
  - [ ] Re-export core types

- [ ] Configure build pipeline (AC: 9, 11)
  - [ ] Set up Vite build configuration
  - [ ] Configure vite-plugin-dts for type generation
  - [ ] Add build script to package.json
  - [ ] Test build: `npm run build --workspace=@allystudio/usetemporal-vue`

- [ ] Implement useTemporal composable (AC: 5)
  - [ ] Accept reactive adapter configuration
  - [ ] Manage reactive browsing state
  - [ ] Manage reactive now state
  - [ ] Provide next/previous navigation functions
  - [ ] Support reactive adapter recreation

- [ ] Implement usePeriod composable (AC: 6)
  - [ ] Accept temporal instance and unit type
  - [ ] Return reactive Period that updates with temporal.browsing
  - [ ] Use computed/watch for reactivity

- [ ] Create comprehensive exports (AC: 7)
  - [ ] Create src/index.ts as main entry point
  - [ ] Export useTemporal
  - [ ] Export usePeriod
  - [ ] Re-export all operations from core (period, divide, next, etc.)
  - [ ] Re-export all types

- [ ] Write tests (AC: 10)
  - [ ] Test useTemporal reactivity
  - [ ] Test usePeriod reactivity
  - [ ] Test adapter recreation on setting changes
  - [ ] Test navigation functions
  - [ ] Run: `TZ=UTC npm test --workspace=@allystudio/usetemporal-vue`

- [ ] Create README.md (AC: 12)
  - [ ] Installation instructions
  - [ ] Basic usage example
  - [ ] useTemporal API documentation
  - [ ] usePeriod API documentation
  - [ ] Link to main documentation
  - [ ] Migration notes from alpha.1

## Dev Notes

### Package Structure

```
packages/usetemporal-vue/
├── src/
│   ├── useTemporal.ts       # Main Vue composable
│   ├── usePeriod.ts         # Reactive period composable
│   ├── types.ts             # Vue-specific types
│   ├── index.ts             # Main exports
│   └── *.test.ts            # Colocated tests
├── package.json             # Package configuration
├── tsconfig.json            # TypeScript config
├── vite.config.ts           # Build configuration
└── README.md                # Package documentation
```

### Key Exports

**Main Entry (src/index.ts):**
```typescript
// Vue composables
export { useTemporal } from './useTemporal'
export { usePeriod } from './usePeriod'

// Re-export core operations for convenience
export {
  period, divide, merge, split,
  next, previous, go,
  contains, isSame,
  isToday, isWeekday, isWeekend
} from '@allystudio/usetemporal/operations'

// Re-export adapters
export { createNativeAdapter } from '@allystudio/usetemporal/native'
// ... other adapters

// Re-export types
export type { Period, Adapter, Unit } from '@allystudio/usetemporal'
export type { VueTemporal } from './types'
```

### VueTemporal Interface

```typescript
import type { Ref } from '@vue/reactivity'
import type { Adapter, Period } from '@allystudio/usetemporal'

export interface VueTemporal {
  adapter: Ref<Adapter>     // Reactive adapter
  browsing: Ref<Period>     // Currently browsed period
  now: Ref<Period>          // Current time period
  next: () => void          // Navigate to next period
  previous: () => void      // Navigate to previous period
  go: (direction: number, count?: number) => void
}

export interface UseTemporalOptions {
  adapter: Adapter | ComputedRef<Adapter>
  date?: Date | Ref<Date>
}
```

### Example Usage (for README)

```typescript
import { ref, computed } from 'vue'
import { useTemporal, usePeriod } from '@allystudio/usetemporal-vue'
import { createNativeAdapter } from '@allystudio/usetemporal-vue'

// Reactive adapter setting
const weekStartsOn = ref(1)  // Monday

const temporal = useTemporal({
  adapter: computed(() =>
    createNativeAdapter({ weekStartsOn: weekStartsOn.value })
  ),
  date: ref(new Date())
})

// Reactive period
const month = usePeriod(temporal, 'month')

// Change setting - everything recalculates!
weekStartsOn.value = 0  // Sunday
```

### Dependencies

**package.json dependencies:**
```json
{
  "dependencies": {
    "@vue/reactivity": "^3.5.18",
    "@allystudio/usetemporal": "workspace:*"
  }
}
```

### Testing

**Test Requirements:**
- Test useTemporal creates reactive refs
- Test usePeriod watches temporal.browsing
- Test navigation (next, previous, go)
- Test adapter recreation when reactive setting changes
- Test that re-exported operations work correctly

**Run tests:**
```bash
export TZ=UTC
npm test --workspace=@allystudio/usetemporal-vue
```

### Build Configuration

**vite.config.ts:**
- Entry point: src/index.ts
- Output: ESM only
- External: @vue/reactivity, @allystudio/usetemporal
- TypeScript declarations via vite-plugin-dts

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-24 | 1.0 | Story created from Epic 011 | Sarah (PO) |

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent_

### Debug Log References

_To be filled by dev agent_

### Completion Notes

_To be filled by dev agent_

### File List

_To be filled by dev agent_

## QA Results

_To be filled by QA agent_
