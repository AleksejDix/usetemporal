# Story 011.07: Write Migration Guide for v2.0 Stable

## Status

Draft

## Story

**As a** developer upgrading from v2.0.0-alpha.1,
**I want** a comprehensive migration guide,
**so that** I can smoothly update my code to the new framework-agnostic architecture.

## Acceptance Criteria

1. Create migration guide document in `/docs/migration/`
2. Document all breaking changes with clear explanations
3. Provide before/after code examples for each change
4. Explain rationale behind each breaking change
5. Include migration checklist for users
6. Document new package structure (@allystudio/usetemporal-vue, -react)
7. Provide search-and-replace patterns where applicable
8. Include troubleshooting section for common issues
9. Link to new package documentation
10. Add migration timeline and support information
11. Document benefits of migration
12. Include automated migration script (if feasible)

## Tasks / Subtasks

- [ ] Create migration document (AC: 1)
  - [ ] Create `/docs/migration/` directory
  - [ ] Create `v2.0.0-alpha.1-to-v2.0.0.md` file
  - [ ] Set up document structure
  - [ ] Add table of contents

- [ ] Document breaking changes (AC: 2, 3, 4)
  - [ ] Breaking change #1: Core package removes @vue/reactivity
  - [ ] Breaking change #2: createTemporal removed from core
  - [ ] Breaking change #3: usePeriod removed from core
  - [ ] Breaking change #4: Import paths changed for framework code
  - [ ] Breaking change #5: Temporal interface removed from core
  - [ ] For each: explain why, show before/after, document impact

- [ ] Document new architecture (AC: 6)
  - [ ] Explain framework-agnostic core
  - [ ] Document @allystudio/usetemporal (core)
  - [ ] Document @allystudio/usetemporal-vue
  - [ ] Document @allystudio/usetemporal-react
  - [ ] Explain when to use each package

- [ ] Create migration paths (AC: 5, 7)
  - [ ] Vue users migration path
  - [ ] React users migration path
  - [ ] Pure JS users migration path
  - [ ] Provide step-by-step instructions
  - [ ] Include search-replace patterns

- [ ] Add code examples (AC: 3)
  - [ ] Before/after: Vue usage
  - [ ] Before/after: Core operations
  - [ ] Before/after: Adapter configuration
  - [ ] Before/after: Type imports

- [ ] Create troubleshooting section (AC: 8)
  - [ ] "Module not found" errors
  - [ ] Type errors after migration
  - [ ] Reactive behavior not working
  - [ ] Bundle size not reducing
  - [ ] Test failures

- [ ] Add reference links (AC: 9)
  - [ ] Link to @allystudio/usetemporal README
  - [ ] Link to @allystudio/usetemporal-vue README
  - [ ] Link to @allystudio/usetemporal-react README
  - [ ] Link to examples
  - [ ] Link to full documentation

- [ ] Document benefits (AC: 11)
  - [ ] Bundle size reduction
  - [ ] Framework flexibility
  - [ ] Clearer architecture
  - [ ] Better tree-shaking

- [ ] Consider automated migration (AC: 12)
  - [ ] Evaluate feasibility of codemod
  - [ ] If feasible: create simple migration script
  - [ ] If not: document manual steps clearly
  - [ ] Test migration script on example code

- [ ] Add support information (AC: 10)
  - [ ] Migration timeline
  - [ ] Support channels
  - [ ] Breaking change policy
  - [ ] Deprecation schedule (if any)

## Dev Notes

### Migration Guide Structure

```markdown
# Migration Guide: v2.0.0-alpha.1 → v2.0.0

## Overview
- What changed and why
- Who is affected
- Estimated migration time

## Breaking Changes Summary
1. Core package is now framework-agnostic
2. createTemporal moved to framework packages
3. usePeriod moved to framework packages
4. Import paths changed
5. Type names changed

## Migration Paths

### For Vue Users
[Step-by-step instructions]

### For React Users
[Step-by-step instructions]

### For Pure JS Users
[Step-by-step instructions]

## Detailed Changes

### Change #1: [Title]
- **What changed:** [Description]
- **Why:** [Rationale]
- **Who's affected:** [User types]
- **Before:** [Code example]
- **After:** [Code example]

## Benefits
[List benefits of migrating]

## Troubleshooting
[Common issues and solutions]

## Support
[Where to get help]
```

### Key Breaking Changes to Document

**1. Core Package No Longer Has Reactivity**

Before (alpha.1):
```typescript
import { createTemporal, usePeriod } from '@allystudio/usetemporal'
import { createNativeAdapter } from '@allystudio/usetemporal/native'

const temporal = createTemporal({
  adapter: createNativeAdapter(),
  date: new Date()
})

const month = usePeriod(temporal, 'month')
```

After (v2.0.0) - Vue:
```typescript
import { useTemporal, usePeriod } from '@allystudio/usetemporal-vue'
import { createNativeAdapter } from '@allystudio/usetemporal/native'

const temporal = useTemporal({
  adapter: createNativeAdapter(),
  date: ref(new Date())
})

const month = usePeriod(temporal, 'month')
```

After (v2.0.0) - React:
```typescript
import { useTemporal, usePeriod } from '@allystudio/usetemporal-react'
import { createNativeAdapter } from '@allystudio/usetemporal/native'

function MyComponent() {
  const temporal = useTemporal({
    adapter: createNativeAdapter(),
    date: new Date()
  })

  const month = usePeriod(temporal, 'month')
}
```

**2. Pure Functions Usage (No Framework)**

Before (alpha.1) - forced to use createTemporal:
```typescript
import { createTemporal } from '@allystudio/usetemporal'
```

After (v2.0.0) - can use pure functions:
```typescript
import { period, divide } from '@allystudio/usetemporal/operations'
import { createNativeAdapter } from '@allystudio/usetemporal/native'

const adapter = createNativeAdapter({ weekStartsOn: 1 })
const month = period(adapter, new Date(), 'month')
const weeks = divide(adapter, month, 'week')
```

### Migration Checklist Template

```markdown
## Migration Checklist

- [ ] Identify which framework you're using (Vue/React/None)
- [ ] Update package.json dependencies
  - [ ] Keep @allystudio/usetemporal
  - [ ] Add @allystudio/usetemporal-vue OR @allystudio/usetemporal-react
- [ ] Update import statements
  - [ ] Change createTemporal → useTemporal
  - [ ] Update import path to framework package
- [ ] Update function calls
  - [ ] Rename createTemporal() to useTemporal()
  - [ ] Update adapter configuration if using reactive settings
- [ ] Update type imports
  - [ ] Change Temporal → VueTemporal or ReactTemporal
- [ ] Run tests
- [ ] Check bundle size reduction
- [ ] Verify all functionality works
```

### Simple Migration Script Pattern

```bash
#!/bin/bash
# Simple find-and-replace migration script

# Vue users
find src -name "*.vue" -o -name "*.ts" -o -name "*.tsx" | xargs sed -i '' \
  's/@allystudio\/usetemporal/@allystudio\/usetemporal-vue/g'

find src -name "*.vue" -o -name "*.ts" -o -name "*.tsx" | xargs sed -i '' \
  's/createTemporal/useTemporal/g'

echo "Migration complete. Please review changes and test your application."
```

### Testing the Guide

Before finalizing, test the migration guide by:
1. Starting with alpha.1 code
2. Following the guide step-by-step
3. Verifying everything works
4. Noting any missing steps
5. Updating guide accordingly

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-24 | 1.0 | Story created from Epic 011 | Sarah (PO) |

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent_

### Debug Log References

_To be filled by dev agent_

### Completion Notes

_To be filled by dev agent_

### File List

_To be filled by dev agent_

## QA Results

_To be filled by QA agent_
