# Story 011.06: Create React Example Application

## Status

Draft

## Story

**As a** React developer evaluating useTemporal,
**I want** a working React example application,
**so that** I can see how to integrate useTemporal-react into my projects.

## Acceptance Criteria

1. Create `packages/usetemporal-react/examples/` directory
2. Initialize React application with Vite
3. Install @allystudio/usetemporal-react dependency
4. Implement calendar component using useTemporal and usePeriod
5. Demonstrate reactive adapter configuration (weekStartsOn toggle)
6. Demonstrate period navigation (next/previous month)
7. Show divide() operation to split month into weeks
8. Application builds successfully
9. Application runs in development mode
10. Code is well-commented for educational purposes
11. README.md with setup and run instructions
12. Demonstrate best practices for React integration

## Tasks / Subtasks

- [ ] Initialize React app (AC: 1, 2)
  - [ ] Create `packages/usetemporal-react/examples/` directory
  - [ ] Run `npm create vite@latest . -- --template react-ts`
  - [ ] Update package.json name to `@usetemporal-examples/react` *(legacy — replaced by shared package-level Vite config)*
  - [ ] Add to root workspace if needed

- [ ] Install dependencies (AC: 3)
  - [ ] Add @allystudio/usetemporal-react: workspace:*
  - [ ] Add any UI libraries needed (optional)
  - [ ] Run npm install

- [ ] Create Calendar component (AC: 4, 5, 6, 7)
  - [ ] Create src/components/Calendar.tsx
  - [ ] Implement useTemporal hook
  - [ ] Implement usePeriod to get current month
  - [ ] Add weekStartsOn state toggle
  - [ ] Use useMemo to recreate adapter when weekStartsOn changes
  - [ ] Add next/previous navigation buttons
  - [ ] Use divide() to split month into weeks
  - [ ] Render calendar grid

- [ ] Create example components
  - [ ] Create PeriodDisplay component (shows current period info)
  - [ ] Create NavigationControls component
  - [ ] Create WeekStartToggle component
  - [ ] Compose in main App.tsx

- [ ] Add styling
  - [ ] Create basic CSS for calendar grid
  - [ ] Style navigation controls
  - [ ] Make it visually clear and usable
  - [ ] Responsive design (optional but nice)

- [ ] Add educational comments (AC: 10, 12)
  - [ ] Comment useMemo adapter recreation pattern
  - [ ] Comment state management patterns
  - [ ] Explain divide() usage
  - [ ] Note best practices

- [ ] Testing and build (AC: 8, 9)
  - [ ] Test dev mode: `npm run dev`
  - [ ] Test production build: `npm run build`
  - [ ] Test preview: `npm run preview`
  - [ ] Verify all features work

- [ ] Create README.md (AC: 11)
  - [ ] Installation instructions
  - [ ] How to run development server
  - [ ] How to build for production
  - [ ] Features demonstrated
  - [ ] Code structure explanation
  - [ ] Link to useTemporal documentation

## Dev Notes

### Application Structure

```
packages/usetemporal-react/examples/
├── src/
│   ├── components/
│   │   ├── Calendar.tsx         # Main calendar component
│   │   ├── PeriodDisplay.tsx    # Shows current period info
│   │   ├── NavigationControls.tsx
│   │   └── WeekStartToggle.tsx
│   ├── App.tsx                  # Main app
│   ├── main.tsx                 # Entry point
│   └── index.css                # Styles
├── package.json
├── vite.config.ts
├── tsconfig.json
└── README.md
```

### Calendar Component Pattern

```typescript
import { useState, useMemo } from 'react'
import { useTemporal, usePeriod, divide, createNativeAdapter } from '@allystudio/usetemporal-react'

export function Calendar() {
  // State for reactive adapter configuration
  const [weekStartsOn, setWeekStartsOn] = useState<0 | 1>(1)

  // CRITICAL: Adapter must be memoized and recreate when settings change
  const adapter = useMemo(
    () => createNativeAdapter({ weekStartsOn }),
    [weekStartsOn]
  )

  // useTemporal manages browsing state
  const temporal = useTemporal({
    adapter,
    date: new Date()
  })

  // usePeriod reactively computes period from browsing state
  const month = usePeriod(temporal, 'month')

  // Divide month into weeks for calendar grid
  const weeks = divide(adapter, month, 'week')

  return (
    <div>
      <h1>{month.start.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</h1>

      <button onClick={() => setWeekStartsOn(weekStartsOn === 1 ? 0 : 1)}>
        Week starts on: {weekStartsOn === 1 ? 'Monday' : 'Sunday'}
      </button>

      <button onClick={temporal.previous}>Previous</button>
      <button onClick={temporal.next}>Next</button>

      <div className="calendar-grid">
        {weeks.map((week, i) => (
          <div key={i} className="week">
            {/* Render week days */}
          </div>
        ))}
      </div>
    </div>
  )
}
```

### Features to Demonstrate

1. **Reactive Adapter Configuration**
   - Show weekStartsOn toggle
   - Demonstrate adapter recreation with useMemo
   - Show calendar recalculating when setting changes

2. **Period Navigation**
   - Previous/Next month buttons
   - Show browsing.date changing
   - Demonstrate usePeriod reactivity

3. **Divide Operation**
   - Split month into weeks
   - Show weeks array rendering
   - Demonstrate hierarchical time structure

4. **Type Safety**
   - Full TypeScript integration
   - Show IntelliSense working
   - Type-safe Period operations

### Educational Comments to Include

```typescript
// PATTERN: Reactive adapter configuration
// When weekStartsOn changes, useMemo recreates the adapter.
// This triggers temporal to recalculate all periods.
const adapter = useMemo(
  () => createNativeAdapter({ weekStartsOn }),
  [weekStartsOn]  // ← Dependency array
)

// PATTERN: React state management with useTemporal
// This hook manages browsing and now state internally using useState.
// Navigation functions (next, previous) trigger React re-renders.
const temporal = useTemporal({ adapter, date: new Date() })

// PATTERN: Reactive period computation
// usePeriod uses useMemo to recalculate when temporal.browsing changes.
// This ensures the component re-renders with correct period data.
const month = usePeriod(temporal, 'month')
```

### package.json

> **Note**: The standalone `@usetemporal-examples/react` workspace described here has since been replaced by running the demo through the package-level Vite config, so this JSON is retained only for historical reference.

```json
{
  "name": "@usetemporal-examples/react",
  "version": "1.0.0",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "@allystudio/usetemporal-react": "workspace:*",
    "react": "^18.3.1",
    "react-dom": "^18.3.1"
  },
  "devDependencies": {
    "@types/react": "^18.3.0",
    "@types/react-dom": "^18.3.0",
    "@vitejs/plugin-react": "^4.0.0",
    "typescript": "^5.7.3",
    "vite": "^7.2.4"
  }
}
```

### Testing

**Manual Testing Checklist:**
- [ ] Application loads without errors
- [ ] Calendar displays current month
- [ ] Previous button navigates to previous month
- [ ] Next button navigates to next month
- [ ] Week start toggle changes calendar layout
- [ ] All TypeScript types work correctly
- [ ] Build produces optimized bundle
- [ ] No console errors or warnings

**Run commands:**
```bash
npm run dev --workspace=@allystudio/usetemporal-react
npm install
npm run dev     # Should open on http://localhost:5173
npm run build   # Should build successfully
npm run preview # Should serve built app
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-24 | 1.0 | Story created from Epic 011 | Sarah (PO) |

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent_

### Debug Log References

_To be filled by dev agent_

### Completion Notes

_To be filled by dev agent_

### File List

_To be filled by dev agent_

## QA Results

_To be filled by QA agent_
